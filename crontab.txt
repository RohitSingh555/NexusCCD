# NexusCCD Scheduled Tasks (Cron Jobs) - PRODUCTION
# To install this crontab, run: crontab /home/Admin0/NexusCCD/crontab.txt
# To view current crontab: crontab -l
# To edit crontab: crontab -e

# 1. Database Backup - Daily at 1:00 AM
# Creates a compressed backup of the PostgreSQL database
0 1 * * * /home/Admin0/NexusCCD/scripts/backup_database.sh >> /home/Admin0/NexusCCD/logs/database_backup.log 2>&1

# 2. Audit Log Cleanup - Daily at 2:00 AM
# Deletes delete audit log entries older than 7 days
# Deletes other audit logs older than 15 days
0 2 * * * /home/Admin0/NexusCCD/scripts/cleanup_old_audit_logs.sh >> /home/Admin0/NexusCCD/logs/audit_cleanup.log 2>&1

# 3. Daily Client Report - Daily at 11:00 PM
# Sends daily client reports via email
0 23 * * * /home/Admin0/NexusCCD/scripts/send_daily_report.sh >> /home/Admin0/NexusCCD/logs/daily_report.log 2>&1

# 4. Session Cleanup - Weekly on Sunday at 3:00 AM
# Removes expired Django sessions
0 3 * * 0 cd /home/Admin0/NexusCCD && docker-compose -f docker-compose.prod.yml exec -T web python manage.py clearsessions >> /home/Admin0/NexusCCD/logs/session_cleanup.log 2>&1

